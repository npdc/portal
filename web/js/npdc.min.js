function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}function openOverlay(e){if($("a, button, input").each(function(){$(this).is("[tabindex]")&&$(this).attr("data-tabindex",$(this).attr("tabindex")),$(this).attr("tabindex","-1")}),$("iframe:not([src^='http'])").contents().find("a, button, input").each(function(){$(this).is("[tabindex]")&&$(this).attr("data-tabindex",$(this).attr("tabindex")),$(this).attr("tabindex","-1")}),null===getParameterByName("referer"))var t=encodeURIComponent(window.location);else var t=getParameterByName("referer");$("#overlay .inner").html('<iframe src="'+e+(e.indexOf("?")===-1?"?":"&")+"u="+t+'"></iframe>'),$("#overlay").fadeIn(250)}function closeOverlay(){$("#overlay iframe").contents().find("body").hasClass("user")?window.location=window.location.href.replace(/#[a-zA-Z0-9]*$/,"").replace(/overlay=[a-zA-Z0-9]*[&]?/g,"").replace(/&$/,""):$("#overlay").fadeOut(250)}function openUrl(e){parent.window.location.href=e}function toggleRelated(e){e?($(".parent, .child, .noRelated").hide(),$(".related").css("display","inline-block")):($(".parent, .child, .noRelated").show(),$(".related").css("display","none"))}$().ready(function(){$(".collapsible").each(function(){$(this).on("click",function(){$(this).next().hasClass("hiddenSubDiv")?items=$(this).next():items=$(this).nextUntil("hr").not("[id$=_new]"),$(this).hasClass("collapsed")?(items.slideDown(),$(this).removeClass("collapsed")):(items.slideUp(),$(this).addClass("collapsed"))})}),$("body").addClass("no-touch"),$("#menu .sub span").click(function(){$(this).parent().hasClass("hover")?$(".hover").removeClass("hover"):($(".hover").removeClass("hover"),$(this).parent().addClass("hover")),event.stopPropagation()}),$("#page").on("click",function(){$(".hover").removeClass("hover")}),$(".list #left h3").click(function(){$(".list #left").toggleClass("visible")}),$(".single-col #right h3").click(function(){$("#right").toggleClass("visible")}),$("#menu h4").click(function(){$("#menu").toggleClass("hover"),$("#menu .sub.hover").removeClass("hover"),event.stopPropagation()}),$("body.list table").each(function(){var e=25,t=5,a=(window.location.hash.substr(1)||1)-1,n=$(this),s=n.find("tbody tr").length;n.bind("search",function(){clearTimeout(n.timer),n.timer=setTimeout(function(){n.trigger("doSearch")},250)}),n.bind("doSearch",function(){$(".odd").removeClass("odd"),$(".even").removeClass("even");var e=$(this).prev("input").val().toUpperCase(),t=0;e.length>0?($(".pager").hide(),n.find("tbody tr").hide(),n.find("tbody tr").each(function(){$(this).html().toUpperCase().indexOf(e)>-1&&($(this).show(),$(this).addClass(t%2?"even":"odd"),t++)})):($(".pager").show(),$(this).trigger("repaginate"))}),n.bind("repaginate",function(){$(".pager .numbers .page-number").show(),$(".numberdots").remove(),n.find("tbody tr").hide().slice(a*e,(a+1)*e).show(),$(".counter1").html(a*e+1);var t=(a+1)*e;$(".counter2").html(t>s?s:t),$("span.page-number").removeClass("active"),$("span.page-number:nth-child("+(a+1)+")").addClass("active"),location.hash=a+1;var i=$(".pager .numbers").children(".page-number").length/2,o=3;i>10&&(a>o+1&&$(".pager .numbers").each(function(){$(this).children(".page-number").slice(1,a-o).hide(),$(this).children(".page-number:first-child()").after('<span class="numberdots">...</span>')}),a<i-o-3&&$(".pager .numbers").each(function(){$(this).children(".page-number").slice(a+o+1,i-1).hide(),$(this).children(".page-number:last-child").before('<span class="numberdots">...</span>')}))});var i=$('<div class="pager"></div>');if(s>e){for(var o=$('<span class="numbers">Page: </span>'),r=Math.ceil(s/e),l=0;l<r;l++)$('<span class="page-number"></span>').text(l+1).appendTo(o);$('<span class="hint">Showing result <span class="counter1">'+(1+a*e)+'</span> to <span class="counter2">'+(a+1)*e+"</span> of "+s+"</span>").appendTo(i),o.appendTo(i),o.find("span.page-number:nth-child("+(a+1)+")").addClass("active")}else s>=t&&$('<span class="hint">Showing all '+s+" results</span>").appendTo(i);i.insertBefore(n),i.clone().insertAfter(n),$("span.page-number").click(function(){a=$(this).text()-1,n.trigger("repaginate")}),n.hasClass("searchbox")&&i.after('<input type="text" placeholder="Type to search" onKeyup="$(this).next(\'table\').trigger(\'search\')" />'),$(window).on("hashchange",function(){a=(window.location.hash.substr(1)||1)-1,n.trigger("repaginate")}),n.trigger("repaginate")}),$("a[href*='://']").attr("target","_blank"),$("input[type=reset]").click(function(){return confirm("Are you sure you want to reset the form?")}),$("#left select[multiple]").each(function(){$(this).hide(),$(this).wrap("<div></div>");var e=$(this).attr("name").substring(0,$(this).attr("name").length-2);$(this).after('<div id="select_'+e+'" class="select"></div>'),$(this).children("option").each(function(){var t='<div data-value="'+$(this).val()+'" '+($(this).is("[selected]")?'class="selected"':"")+">"+$(this).text()+"</div>";$("#select_"+e).append(t)}),$("#select_"+e+" div").click(function(){var e=$(this).parent().siblings("select").children("[value="+$(this).attr("data-value")+"]");e.prop("selected")?(e.prop("selected",!1),$(this).removeClass("selected")):(e.prop("selected",!0),$(this).addClass("selected")),$(this).parent().parent().prev().children(".count").text("("+$(this).parent().find(".selected").length+" selected)").css("font-style","italic")}),$(this).parent().prev().append(' <span class="count">('+$(this).find("[selected]").length+" selected)</span>")}),$(".debug.bottom").click(function(){$(".debug.bottom").toggleClass("expanded")}),Inputmask.extendDefinitions({X:{validator:"[0-9xX]",cardinality:1,casing:"upper"}}),Inputmask.extendAliases({"yyyy[-mm[-dd]]":{mask:"y[-1[-d]]",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},orcid:{mask:"9999-9999-9999-999X"}}),$("input[data-inputmask]").inputmask(),$("body").hasClass("nomenu")||window.top.location!==window.location&&(window.top.location=window.location),$("#versionSelect").change(function(){console.log($("#versionSelect").val()),window.location=$("#versionSelect").val()}),$("div.overflow").each(function(){$(this).height()>150&&$(this).addClass("overheight").append('<div class="bottombar"></div>')}),$(".bottombar").click(function(){$(this).parent().toggleClass("expanded")})});