function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function openOverlay(e){if($("a, button, input").each(function(){$(this).is("[tabindex]")&&$(this).attr("data-tabindex",$(this).attr("tabindex")),$(this).attr("tabindex","-1")}),$("iframe").contents().find("a, button, input").each(function(){$(this).is("[tabindex]")&&$(this).attr("data-tabindex",$(this).attr("tabindex")),$(this).attr("tabindex","-1")}),null===getParameterByName("referer"))var t=encodeURIComponent(window.location);else var t=getParameterByName("referer");$("#overlay .inner").html('<iframe src="'+e+(e.indexOf("?")===-1?"?":"&")+"u="+t+'"></iframe>'),$("#overlay").fadeIn(250)}function closeOverlay(){$("#overlay iframe").contents().find("body").hasClass("user")?window.location=window.location.pathname:$("#overlay").fadeOut(250)}function openUrl(e){parent.window.location.href=e}function toggleRelated(e){e?($(".parent, .child, .noRelated").hide(),$(".related").css("display","inline-block")):($(".parent, .child, .noRelated").show(),$(".related").css("display","none"))}$().ready(function(){$(".collapsible").each(function(){$(this).on("click",function(){$(this).next().hasClass("hiddenSubDiv")?items=$(this).next():items=$(this).nextUntil("hr").not("[id$=_new]"),$(this).hasClass("hidden")?(items.slideDown(),$(this).removeClass("hidden")):(items.slideUp(),$(this).addClass("hidden"))})}),$("body").addClass("no-touch"),$("#menu .sub span").click(function(){$(this).parent().hasClass("hover")?$(".hover").removeClass("hover"):($(".hover").removeClass("hover"),$(this).parent().addClass("hover")),event.stopPropagation()}),$("#page").on("click",function(){$(".hover").removeClass("hover")}),$(".list #left h3").click(function(){$(".list #left").toggleClass("visible")}),$(".single-col #right h3").click(function(){$("#right").toggleClass("visible")}),$("#menu h4").click(function(){$("#menu").toggleClass("hover"),$("#menu .sub.hover").removeClass("hover"),event.stopPropagation()}),$("body.list table").each(function(){var e=25,t=5,n=(window.location.hash.substr(1)||1)-1,a=$(this),s=a.find("tbody tr").length;a.bind("search",function(){clearTimeout(a.timer),a.timer=setTimeout(function(){a.trigger("doSearch")},250)}),a.bind("doSearch",function(){$(".odd").removeClass("odd"),$(".even").removeClass("even");var e=$(this).prev("input").val().toUpperCase(),t=0;e.length>0?($(".pager").hide(),a.find("tbody tr").hide(),a.find("tbody tr").each(function(){$(this).html().toUpperCase().indexOf(e)>-1&&($(this).show(),$(this).addClass(t%2?"even":"odd"),t++)})):($(".pager").show(),$(this).trigger("repaginate"))}),a.bind("repaginate",function(){$(".pager .numbers .page-number").show(),$(".numberdots").remove(),a.find("tbody tr").hide().slice(n*e,(n+1)*e).show(),$(".counter1").html(n*e+1);var t=(n+1)*e;$(".counter2").html(t>s?s:t),$("span.page-number").removeClass("active"),$("span.page-number:nth-child("+(n+1)+")").addClass("active"),location.hash=n+1;var i=$(".pager .numbers").children(".page-number").length/2,r=3;i>10&&(n>r+1&&$(".pager .numbers").each(function(){$(this).children(".page-number").slice(1,n-r).hide(),$(this).children(".page-number:first-child()").after('<span class="numberdots">...</span>')}),n<i-r-3&&$(".pager .numbers").each(function(){$(this).children(".page-number").slice(n+r+1,i-1).hide(),$(this).children(".page-number:last-child").before('<span class="numberdots">...</span>')}))});var i=$('<div class="pager"></div>');if(s>e){for(var r=$('<span class="numbers">Page: </span>'),o=Math.ceil(s/e),l=0;l<o;l++)$('<span class="page-number"></span>').text(l+1).appendTo(r);$('<span class="hint">Showing result <span class="counter1">'+(1+n*e)+'</span> to <span class="counter2">'+(n+1)*e+"</span> of "+s+"</span>").appendTo(i),r.appendTo(i),r.find("span.page-number:nth-child("+(n+1)+")").addClass("active")}else s>=t&&$('<span class="hint">Showing all '+s+" results</span>").appendTo(i);i.insertBefore(a),i.clone().insertAfter(a),$("span.page-number").click(function(){n=$(this).text()-1,a.trigger("repaginate")}),a.hasClass("searchbox")&&i.after('<input type="text" placeholder="Type to search" onKeyup="$(this).next(\'table\').trigger(\'search\')" />'),$(window).on("hashchange",function(){n=(window.location.hash.substr(1)||1)-1,a.trigger("repaginate")}),a.trigger("repaginate")}),$("a[href*='://']").attr("target","_blank"),$("input[type=reset]").click(function(){return confirm("Are you sure you want to reset the form?")}),$("#left select[multiple]").each(function(){$(this).hide(),$(this).wrap("<div></div>");var e=$(this).attr("name").substring(0,$(this).attr("name").length-2);$(this).after('<div id="select_'+e+'" class="select"></div>'),$(this).children("option").each(function(){var t='<div data-value="'+$(this).val()+'" '+($(this).is("[selected]")?'class="selected"':"")+">"+$(this).text()+"</div>";$("#select_"+e).append(t)}),$("#select_"+e+" div").click(function(){var e=$(this).parent().siblings("select").children("[value="+$(this).attr("data-value")+"]");e.prop("selected")?(e.prop("selected",!1),$(this).removeClass("selected")):(e.prop("selected",!0),$(this).addClass("selected")),$(this).parent().parent().prev().children(".count").text("("+$(this).parent().find(".selected").length+" selected)").css("font-style","italic")}),$(this).parent().prev().append(' <span class="count">('+$(this).find("[selected]").length+" selected)</span>")}),$(".debug.bottom").click(function(){$(".debug.bottom").toggleClass("expanded")}),Inputmask.extendDefinitions({X:{validator:"[0-9xX]",cardinality:1,casing:"upper"}}),Inputmask.extendAliases({"yyyy[-mm[-dd]]":{mask:"y[-1[-d]]",placeholder:"yyyy-mm-dd",leapday:"-02-29",separator:"-",alias:"yyyy/mm/dd"},orcid:{mask:"9999-9999-9999-999X"}}),$("input[data-inputmask]").inputmask(),$("input.error:first").focus(),$("body").hasClass("nomenu")||window.top.location!==window.location&&(window.top.location=window.location)});